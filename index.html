<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title> Gamedev Canvas Workshop </title>
    <style>
        * { padding: 0; margin: 0; }
        canvas {
            background: transparent;
            position: absolute;
            top: 0;
            left: 0;
        }
        #container {
            position: relative;
            height: 240px;
            width: 240px;
            -moz-transform: scale(2.5);
            margin: 0 auto;
        }
    </style>
</head>
<body>

<div id="container">
    <canvas id="background" width="240" height="240"></canvas>
    <canvas id="entities" width="240" height="240"></canvas>
</div>

<script type="text/javascript" src="BaseClasses.js"></script>
<script type="text/javascript" src="Entities.js"></script>
<script type="text/javascript" src="Utilities.js"></script>
<script type="text/javascript" src="Tiles.js"></script>
<script type="text/javascript" src="Pathfinding.js"></script>
<script>
    


    //var x = canvas.width/2;
    //var y = canvas.height-45;
    //var dx = 1;
    //var dy = -1;
    
        var loaded = false;
    container.style.zoom = zoomLevel;
    window.onload = function() {

        function update() {
            if(player.moving) {
                e_ctx.clearRect(player.x*8 - 1, player.y*8 - 1, 9, 9);
                player.moveAlongPath();
            } else {
                player.draw();
            }
            /*if(player.x < entities.width) {
                player.move(player.x + 2, player.y);
            } else if (player.x == entities.width) {
                player.move(0, player.y + 8);
            }*/
            //drawRect(player.x, player.y, "green");
        }

        
        //var moveLimit = 5;
        //var map = new TileMap(2*moveLimit+1, 2*moveLimit+1, null, player.x-moveLimit, player.y-moveLimit);
        //PossibleMovesHelper(player.x, player.y, map, tileMap, moveLimit);
        //its only exploring one way!
        //console.log(map);
        /*for(x = map.indexOffsetX; x < map.indexOffsetX + map.sizeX; x++) {
            for(y = map.indexOffsetY; y < map.indexOffsetY + map.sizeY; y++) {
                console.log("drawing: " + x + ", " + y)
                console.log("tileMap: " + (x-map.indexOffsetX) + ", " + y);
                var tile = map.get(x, y);
                if(tile != null) {
                    //tile.draw(e_ctx, new TileCoordinates(x, y));
                    drawRect(x * 8, y* 8, "red");
                }
            }
        }*/
        //console.log(player.x);
    }
</script>

</body>
</html>
